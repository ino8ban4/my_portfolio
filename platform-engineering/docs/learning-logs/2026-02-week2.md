# 学習ログ: 2026年2月 Week2 (2/8-2/14)

## 📅 期間
2026年2月8日（土）〜 2月14日（金）

## 🎯 今週の目標
- [ ] Kubernetes概念学習
- [ ] minikube環境構築
- [ ] 実際にPodデプロイ

---

## 2/9（日）
**学習時間:** 1.5時間
**学習内容:**
- docker-composeにPostgreSQL追加
  - マルチコンテナ構成（アプリ + DB）
  - 環境変数でDB接続文字列管理
  - depends_on でコンテナ起動順序制御
  - volumesでデータ永続化
- Express APIからPostgreSQL接続実装
  - pg（node-postgres）ライブラリ使用
  - /db-test エンドポイント追加
  - 接続テスト成功
- .dockerignore作成
  - ビルドコンテキスト最適化
  - 不要ファイル除外（node_modules, .git, READMEなど）
  - イメージサイズ削減（200MB以下確認）
- ポート競合のトラブルシューティング
  - ローカルのPostgreSQL停止で解決

**学んだこと:**
- docker-composeでのマルチコンテナ管理
  - services間の依存関係（depends_on）
  - named volumesでのデータ永続化
  - 環境変数による設定の外部化
- .dockerignoreの重要性
  - ビルド時のみ効く（volumes マウントは対象外）
  - ビルドの度に参照される
  - キャッシュとは独立した仕組み
- コンテナベース開発の利点
  - 開発環境と本番環境の差異を最小化
  - チーム全員が同じDB環境を使える

**気づき・メモ:**
- ポート競合はよくあるトラブル
- DATABASE_URLで接続文字列を管理するのがベストプラクティス
- .dockerignoreとDockerfileのマルチステージビルドで二重に最適化

**参考資料:**
- Docker Compose公式ドキュメント: https://docs.docker.com/compose/
- node-postgres: https://node-postgres.com/
- PostgreSQL Docker Hub: https://hub.docker.com/_/postgres

**次回やること:**
- Issue #3: Kubernetes概念学習

---

## 2/11（水・祝）
**学習時間:** 1.5時間
**学習内容:**
- Kubernetes概念学習（記事読み込み）
  - Harmonic Society記事
  - SIOS記事
  - 各種K8s入門記事
- K8s基本概念の整理
  - コンテナオーケストレーションの必要性
  - クラウドネイティブ、マルチクラウド、マイクロサービスとの関係
  - docker-composeとの違い

**理解した主要概念:**

### K8sの3大機能
1. **自動スケーリング**
   - CPU使用率に応じてPod数を動的に増減
   - アクセス減少時はリソース節約

2. **セルフヒーリング**
   - ヘルスチェック → 自動再起動 → 自動置き換え
   - ノード障害時も他サーバにPod移動
   - 前提: 1 Pod = 1責務（最小構成）

3. **負荷分散（ロードバランサ）**
   - Serviceリソースが自動的にリクエスト分散

### K8sの管理単位
- **Pod**: 1つ以上のコンテナをまとめた最小実行単位（実行中のアプリのインスタンス）
- **Deployment**: アプリケーションのデプロイを宣言的に管理（設計図）
- **Service**: 複数Podへの統一的なアクセスポイント（固定の受け口）
- **Namespace**: プロジェクト・チーム・環境の論理的な区切り（フォルダのようなもの）

### DeploymentとPodの関係
```
Deployment（設計図）作成
  ↓ kubectl apply
K8sが自動的にReplicaSet作成
  ↓ 自動
Pod × replicas数 が生成
  ↓
実際にコンテナが動く
```

### docker-composeとの違い
- **Compose**: 個人開発・単一サーバに適している
- **K8s**: 複数サーバ管理、自動スケーリング、大規模システム向け

### 導入検討の判断基準
**重要な考え方:**
> 技術はあくまで手段であり目的ではない。課題ありきで検討する。

**導入を検討すべき状況例:**
- 数万の同時アクセス処理が必要
- マイクロサービスで多数のAPを連携
- 1日に何度もリリースする開発体制
- システム停止が大きな損失につながる

**学んだこと:**
- K8sの哲学: コンテナ（Pod）は小さく、単機能に
- Podは「スケーリングできる最大数」ではなく「実行中のアプリの実体」
- Serviceの役割: Podが頻繁に作り直されIPが変わるため、固定アクセスポイントとして機能
- Namespaceはクラスではなくフォルダのイメージ
- セルフヒーリングの前提: 最小構成のコンテナ（1 Pod = 1責務）
- プラットフォームエンジニアリングと同じ「課題ありき」の思考

**参考資料:**
- Harmonic Society: https://harmonic-society.co.jp/what-is-kubernetes-beginners-guide/
- SIOS: https://tech-lab.sios.jp/archives/29764
- Avinton: https://avinton.com/blog/2025/01/kubernetes-learning-guide/

---

<!-- 勉強した日だけ、上のテンプレートをコピペして追記 -->

---

## 💡 今週の学び
（週末に振り返りを記入）

## 🚀 次週に向けて
（週末に記入）